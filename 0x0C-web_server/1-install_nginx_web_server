#!/usr/bin/env bash

# Update package lists
sudo apt update

# Install Nginx
sudo apt-get -y install nginx

# Create directories and set permissions
sudo mkdir -p /var/www/InnVista.tech/html
sudo chmod -R 755 /var/www/InnVista.tech

# Create a simple HTML file
echo "hello world!" >/var/www/InnVista.tech/html/index.html

# Create an Nginx server block configuration file
sudo bash -c 'cat > /etc/nginx/sites-available/InnVista.tech <<EOF
server {
    listen 80;
    listen [::]:80;

    server_name InnVista.tech www.InnVista.tech;

    root /var/www/InnVista.tech/html;
    index index.html index.htm index.nginx-debian.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
EOF'

# Create a symbolic link to enable the site
sudo ln -s /etc/nginx/sites-available/InnVista.tech /etc/nginx/sites-enabled/

# Test Nginx configuration and restart
sudo nginx -t
sudo systemctl restart nginx
